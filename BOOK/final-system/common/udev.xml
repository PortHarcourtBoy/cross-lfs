<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-udev" role="wrap">
  <?dbhtml filename="udev.html"?>

  <title>Udev-&udev-version;</title>

  <indexterm zone="ch-system-udev">
    <primary sortas="a-Udev">Udev</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>The Udev package contains programs for dynamic creation of device
    nodes.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Udev</title>

    <para os="a">Compile the package:</para>

<screen os="b"><userinput>make EXTRAS="extras/ata_id extras/cdrom_id extras/collect \
    extras/edd_id extras/firmware extras/floppy extras/path_id extras/rule_generator \
    extras/scsi_id extras/usb_id extras/volume_id" udevdir=/dev</userinput></screen>

    <variablelist os="c">
      <title>The meaning of the make parameter:</title>

      <varlistentry>
      <term><parameter>EXTRAS="extras/ata_id extras/cdrom_id extras/collect
      extras/edd_id extras/firmware extras/floppy extras/path_id extras/rule_generator
      extras/scsi_id extras/usb_id extras/volume_id"</parameter></term>
        <listitem>
          <para>This builds the helper applications that are used with
          udev. The helper programs assist in correct handling of devices.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para os="d">If you want to run the testsuite, you need to change
    a hardcoded reference to the <command>test</command> program:</para>

    <screen os="e"><userinput>sed -i 's@/usr/bin/test@/bin/test@' test/udev-test.pl</userinput></screen>

    <para os="f">To test the results, issue:
    <userinput>make test</userinput>.</para>

    <para os="g">Install the package:</para>

<screen os="h"><userinput>make EXTRAS="extras/ata_id extras/cdrom_id extras/collect \
    extras/edd_id extras/firmware extras/floppy extras/path_id extras/rule_generator \
    extras/scsi_id extras/usb_id extras/volume_id" DESTDIR=/ udevdir=/dev install</userinput></screen>

    <variablelist os="i">
      <title>The meaning of the make parameter:</title>

      <varlistentry>
      <term><parameter>DESTDIR=/</parameter></term>
        <listitem>
          <para>This prevents the Udev build process from killing any
          <command>udevd</command> processes that may be running on the
          system.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para os="j">Install documentation:</para>

<screen os="k"><userinput>install -v -m644 -D docs/writing_udev_rules/index.html \
    /usr/share/doc/udev-&udev-version;/index.html</userinput></screen>

    <para os="l">Create a directory for storing firmware that can be
    loaded by <command>udev</command>:</para>

<screen os="m"><userinput>install -dv /lib/firmware</userinput></screen>

  </sect2>

  <sect2 id="contents-udev" role="content">
    <title>Contents of Udev</title>

    <segmentedlist>
      <segtitle>Installed programs</segtitle>
      <segtitle>Installed library</segtitle>
      <segtitle>Installed directory</segtitle>

      <seglistitem>
        <seg>udevadm, udevd, udevinfo (symlink to udevadm),
        udevsettle (symlink to udevadm)</seg>
        <seg>libvolume_id</seg>
        <seg>/etc/udev, /lib/udev</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="udevadm">
        <term><command>udevadm</command></term>
        <listitem>
          <para>This program combines <command>udevinfo</command>,
          <command>udevtrigger</command>, <command>udevsettle</command>,
          <command>udevcontrol</command>, <command>udevmonitor</command>,
          and <command>udevtest</command> into one command.</para>
          <indexterm zone="ch-system-udev udevadm">
            <primary sortas="b-udevadm">udevadm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevadm-control">
        <term><command>udevadm control</command></term>
        <listitem>
          <para>Configures a number of options for the running
          <command>udevd</command> daemon, such as the log level. (Symlink to
          udevadm)</para>
          <indexterm zone="ch-system-udev udevadm-control">
            <primary sortas="b-udevadm-control">udevadm control</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevd">
        <term><command>udevd</command></term>
        <listitem>
          <para>A daemon that reorders hotplug events before submitting them to
          <command>udev</command>,
          thus avoiding various race conditions</para>
          <indexterm zone="ch-system-udev udevd">
            <primary sortas="b-udevd">udevd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevinfo">
        <term><command>udevinfo</command></term>
        <listitem>
          <para>Allows users to query the <command>udev</command> database for
          information on any device currently present on the system; it also
          provides a way to query any device in the <systemitem
          class="filesystem">sysfs</systemitem> tree to help create udev
          rules. (Symlink to udevadm)</para>
          <indexterm zone="ch-system-udev udevinfo">
            <primary sortas="b-udevinfo">udevinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevadm-monitor">
        <term><command>udevadm monitor</command></term>
        <listitem>
          <para>Prints the event received from the kernel and the event which
          <command>udev</command> sends out after rule processing</para>
          <indexterm zone="ch-system-udev udevadm-monitor">
            <primary sortas="b-udevadm-monitor">udevadm monitor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevsettle">
        <term><command>udevsettle</command></term>
        <listitem>
          <para>Watches the Udev event queue and exits if all current uevents
          have been handled. (Symlink to udevadm)</para>
          <indexterm zone="ch-system-udev udevsettle">
            <primary sortas="b-udevsettle">udevsettle</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevadm-test">
        <term><command>udevadm test</command></term>
        <listitem>
          <para>Simulates a <command>udev</command> run for the given device,
          and prints out the name of the node the real <command>udev</command>
          would have created or the name of the renamed network interface</para>
          <indexterm zone="ch-system-udev udevadm-test">
            <primary sortas="b-udevadm-test">udevadm test</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevadm-trigger">
        <term><command>udevadm trigger</command></term>
        <listitem>
          <para>Walks the sysfs tree for devices that need to be added to the
          system.</para>
          <indexterm zone="ch-system-udev udevadm-trigger">
            <primary sortas="b-udeadm-vtrigger">udevadm trigger</primary>
          </indexterm>
        </listitem>
      </varlistentry>     

 <!-- Start of Helpers -->
      <varlistentry id="ata_id">
        <term><command>ata_id</command></term>
        <listitem>
          <para>Provides Udev with a unique string and additional
          information (uuid, label) for an ATA drive</para>
          <indexterm zone="ch-system-udev ata_id">
            <primary sortas="b-ata_id">ata_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cdrom_id">
        <term><command>cdrom_id</command></term>
        <listitem>
          <para>Print the capabilities of a CDROM or DVDROM drive.</para>
          <indexterm zone="ch-system-udev cdrom_id">
            <primary sortas="b-cdrom_id">cdrom_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="create_floppy_devices">
        <term><command>create_floppy_devices</command></term>
        <listitem>
          <para>Creates all possible floppy devices based on the CMOS type</para>
          <indexterm zone="ch-system-udev create_floppy_devices">
            <primary sortas="b-create_floppy_devices">create_floppy_devices</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dasd_id">
        <term><command>dasd_id</command></term>
        <listitem>
          <para>Read the label from an s390 block device.</para>
          <indexterm zone="ch-system-udev dasd_id">
            <primary sortas="b-dasd_id">dasd_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="edd_id">
        <term><command>edd_id</command></term>
        <listitem>
          <para>Identify x86 disk drives from Enhanced Disk Drive calls.</para>
          <indexterm zone="ch-system-udev edd_id">
            <primary sortas="b-edd_id">edd_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="firmware.sh">
        <term><command>firmware.sh</command></term>
        <listitem>
          <para>Script to load firmware for a device</para>
          <indexterm zone="ch-system-udev firmware.sh">
            <primary sortas="b-firmware.sh">firmware.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="path_id">
        <term><command>path_id</command></term>
        <listitem>
          <para>Provide the shortest possible unique hardware path to a
          device</para>
          <indexterm zone="ch-system-udev path_id">
            <primary sortas="b-path_id">path_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="scsi_id">
        <term><command>scsi_id</command></term>
        <listitem>
          <para>Retrieve or generate a unique SCSI identifier.</para>
          <indexterm zone="ch-system-udev scsi_id">
            <primary sortas="b-scsi_id">scsi_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="usb_id">
        <term><command>usb_id</command></term>
        <listitem>
          <para>Identify a USB block device.</para>
          <indexterm zone="ch-system-udev usb_id">
            <primary sortas="b-usb_id">usb_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vol_id">
        <term><command>vol_id</command></term>
        <listitem>
          <para>Probe filesystem type and read label and uuid.</para>
          <indexterm zone="ch-system-udev vol_id">
            <primary sortas="b-vol_id">vol_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>
<!-- End of Helpers -->

      <varlistentry id="libvolume_id">
        <term><filename class="libraryfile">libvolume_id</filename></term>
        <listitem>
          <para>This library provides programs such as <command>vol_id</command>
          with a filesystems type, abel, and uuid from a device node or a
          image.</para>
          <indexterm zone="ch-system-udev libvolume_id">
            <primary sortas="b-libvolume_id">libvolume_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="etc-udev">
        <term><filename class="directory">/etc/udev</filename></term>
        <listitem>
          <para>Contains <command>udev</command> configuration files,
          device permissions, and rules for device naming</para>
          <indexterm zone="ch-system-udev etc-udev">
            <primary sortas="e-/etc/udev">/etc/udev</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lib-udev">
        <term><filename class="directory">/lib/udev</filename></term>
        <listitem>
          <para>Contains <command>udev</command> helper programs
          and static devices which get copied to /dev when booted.</para>
          <indexterm zone="ch-system-udev lib-udev">
            <primary sortas="e-/lib/udev">/lib/udev</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
