<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE c:package [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<c:package xmlns:c="http://schema.cross-lfs.org/book" id="ch-system-bash" c:multibuild="false">

  <c:title>Bash</c:title>
  <c:version>&bash-version;</c:version>
  <c:description>The Bash package contains the Bourne-Again SHell.</c:description>

  <c:install>

    <c:para>The following patch contains updates from the maintainer. The
    maintainer of Bash only releases these patches to fix serious issues:</c:para>

<c:command>patch -Np1 -i ../&bash-branch_update-patch;</c:command>

    <c:para c:multilib="true">The following sed points configure towards the
    correct library directory while searching for Readline:</c:para>

<c:command c:multilib="true">sed -i "/ac_cv_rl_libdir/s@/lib@&amp;64@" configure</c:command>

    <c:para>Prepare Bash for compilation:</c:para>

<c:command c:multilib="false">./configure --prefix=/usr --bindir=/bin \
    --without-bash-malloc --with-installed-readline</c:command>
<c:command c:multilib="true">CC="gcc ${BUILD64}" CXX="g++ ${BUILD64}" \
    ./configure --prefix=/usr --bindir=/bin \
    --without-bash-malloc --with-installed-readline</c:command>

<!--
    <variablelist>
      <title>The meaning of the configure option:</title>

      <varlistentry>
        <term><parameter>-with-installed-readline</parameter></term>
        <listitem>
          <c:para>This option tells Bash to use the
          <filename class="libraryfile">readline</filename> library that is
          already installed on the system rather than using its own readline
          version.</c:para>
        </listitem>
      </varlistentry>
    </variablelist>
-->
    <c:para>Compile the package:</c:para>

<c:command>make</c:command>

    <c:para>To test the results, issue:
    <c:command>make tests</c:command>.</c:para>

    <c:para>Install the package:</c:para>

<c:command>make htmldir=/usr/share/doc/bash-&bash-version; install</c:command>

    <c:para>Run the newly compiled <c:command>bash</c:command> program (replacing
    the one that is currently being executed):</c:para>

<c:command c:nodump="true">exec /bin/bash --login +h</c:command>

    <c:note>
      <c:para>The parameters used make the <c:command>bash</c:command>
      process an interactive login shell and continue to disable hashing so
      that new programs are found as they become available.</c:para>
    </c:note>

  </c:install>

  <c:contents>

    <c:program>
      <c:name>bash</c:name>
      <c:description>A widely-used command interpreter; it performs many types
      of expansions and substitutions on a given command line before executing
      it, thus making this interpreter a powerful tool</c:description>
    </c:program>

    <c:program>
      <c:name>bashbug</c:name>
      <c:description>A shell script to help the user compose and mail standard
      formatted bug reports concerning <c:command>bash</c:command>
      </c:description>
    </c:program>

    <c:program>
      <c:name>sh</c:name>
      <c:description>A symlink to the <c:command>bash</c:command> program; when
      invoked as <c:command>sh</c:command>, <c:command>bash</c:command> tries
      to mimic the startup behavior of historical versions of
      <c:command>sh</c:command> as closely as possible, while conforming to the
      POSIX standard as well</c:description>
    </c:program>

  </c:contents>

</c:package>

