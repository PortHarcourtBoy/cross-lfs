Submitted By: Jim Gifford <jim@linuxfromscratch.org>
Date: 2006-12-02
Initial Package Version: 2.5.9
Origin: Jim Gifford
Upstream Status: Submitted
Description: Adds DESTDIR Support

diff -Naur patch-2.5.9.orig/Makefile.in patch-2.5.9/Makefile.in
--- patch-2.5.9.orig/Makefile.in	2003-05-20 09:15:48.000000000 -0700
+++ patch-2.5.9/Makefile.in	2006-12-02 17:16:00.000000000 -0800
@@ -43,6 +43,7 @@
 PACKAGE_NAME = @PACKAGE_NAME@
 PACKAGE_VERSION = @PACKAGE_VERSION@
 
+DESTDIR = @DESTDIR@
 prefix = @prefix@
 exec_prefix = @exec_prefix@
 
@@ -112,11 +113,11 @@
 	$(CC) -o $@ $(CFLAGS) $(LDFLAGS) $(OBJS) $(LIBS)
 
 install:: all installdirs
-	$(INSTALL_PROGRAM) patch$(EXEEXT) $(bindir)/$(patch_name)$(EXEEXT)
-	-$(INSTALL_DATA) $(srcdir)/patch.man $(man1dir)/$(patch_name)$(man1ext)
+	$(INSTALL_PROGRAM) patch$(EXEEXT) ${DESTDIR}$(bindir)/$(patch_name)$(EXEEXT)
+	-$(INSTALL_DATA) $(srcdir)/patch.man ${DESTDIR}$(man1dir)/$(patch_name)$(man1ext)
 
 installdirs::
-	$(SHELL) $(srcdir)/mkinstalldirs $(bindir) $(man1dir)
+	$(SHELL) $(srcdir)/mkinstalldirs ${DESTDIR}$(bindir) ${DESTDIR}$(man1dir)
 
 install-strip::
 	$(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' install
