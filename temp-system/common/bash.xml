<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-temp-system-bash" role="wrap">
  <?dbhtml filename="bash.html"?>

  <title>Bash-&bash-version;</title>

  <indexterm zone="ch-temp-system-bash">
    <primary sortas="a-Bash">Bash</primary>
    <secondary>temporary system</secondary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../final-system/common/bash.xml"
  xpointer="xpointer(//*[@role='package'])"/>

  <sect2 role="installation">
    <title>Installation of Bash</title>

    <para os="aa">Fix a minor issue during the build when cross-compiling:</para>

<screen os="ab"><userinput>cp Makefile.in Makefile.in.orig
sed -e "s@size \$(Program)@${LFS_TARGET}-&amp;@g"  Makefile.in.orig > Makefile.in</userinput></screen>

    <para os="ac">Remove a test that causes the build to fail::</para>

<screen os="ad"><userinput>echo "ac_cv_func_setvbuf_reversed=no" >> config.cache</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='g'])"/>

<screen os="h"><userinput>./configure --prefix=/tools --with-curses \
   --without-bash-malloc --host=${LFS_TARGET} \
   --cache-file=config.cache</userinput></screen>

    <variablelist os="ad">
      <title>The meaning of the configure options:</title>

      <varlistentry>
        <term><parameter>--with-curses</parameter></term>
        <listitem>
          <para>This option allows linking to Ncurses.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--without-bash-malloc</parameter></term>
        <listitem>
          <para>This options turns off the use of Bash's memory allocation
          (malloc) function which is known to cause segmentation faults.
          By turning this option off, Bash will use the malloc function
          from Glibc which are more stable.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='j'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='k'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='m'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='n'])"/>

    <para os="ae">Make a link for the programs that use <command>sh</command> for
    a shell:</para>

<screen os="af"><userinput>ln -s bash /tools/bin/sh</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Details on this package are located in <xref
    linkend="contents-bash" role="."/></para>

  </sect2>

</sect1>
